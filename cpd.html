<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from org.apache.maven.plugins:maven-pmd-plugin:3.11.0:cpd at 2022-02-01 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>com.amazon.ion:ion-java &#x2013; CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">
com.amazon.ion:ion-java
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-02-01</span>
          &nbsp;| <span id="projectVersion">Version: 1.9.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="./" title="com.amazon.ion:ion-java">com.amazon.ion:ion-java</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="expanded"><a href="project-reports.html" title="Project Reports">Project Reports</a>
      <ul>
       <li class="none"><a href="jacoco/index.html" title="JaCoCo">JaCoCo</a></li>
       <li class="none"><a href="apidocs/index.html" title="Ion Java Javadoc">Ion Java Javadoc</a></li>
       <li class="none"><a href="findbugs.html" title="FindBugs">FindBugs</a></li>
       <li class="none"><strong>CPD</strong></li>
       <li class="none"><a href="pmd.html" title="PMD">PMD</a></li>
       <li class="none"><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
       <li class="none"><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
      </ul></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<div class="section">
<h2><a name="CPD_Results"></a>CPD Results</h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="https://pmd.github.io/latest/pmd_userdocs_cpd.html">CPD</a> 6.8.0.</p></div>
<div class="section">
<h2><a name="Duplications"></a>Duplications</h2>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L873">873</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L203">203</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    protected final long readULong(int len) throws IOException
    {
        long    retvalue = 0;
        int b;
        switch (len) {
        default:
            throw new IonException(&quot;value too large for Java long&quot;);
        case 8:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 7:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 6:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 5:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 4:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 3:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 2:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 1:
            if ((b = read()) &lt; 0) throwUnexpectedEOFException();
            retvalue = (retvalue &lt;&lt; 8) | b;
        case 0:
            // do nothing, it's just a 0 length is a 0 value
        }
        return retvalue;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1422">1422</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1473">1473</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public int readVarIntAsInt() throws IOException
        {
            int     retvalue = 0;
            boolean is_negative = false;
            int     b;

            // synthetic label &quot;done&quot; (yuck)
done:       for (;;) {
                // read the first byte - it has the sign bit
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                if ((b &amp; 0x40) != 0) {
                    is_negative = true;
                }
                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // if we get here we have more bits than we have room for :(
                throw new IonException(&quot;var int overflow at: &quot;+this.position());
            }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L242">242</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L328">328</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public int readVarInt() throws IOException
        {
            int     retvalue = 0;
            boolean is_negative = false;
            int     b;

            // synthetic label &quot;done&quot; (yuck)
done:       for (;;) {
                // read the first byte - it has the sign bit
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                if ((b &amp; 0x40) != 0) {
                    is_negative = true;
                }
                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // if we get here we have more bits than we have room for :(
                throwIntOverflowExeption();
            }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1422">1422</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1473">1473</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L242">242</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L328">328</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public int readVarIntAsInt() throws IOException
        {
            int     retvalue = 0;
            boolean is_negative = false;
            int     b;

            // synthetic label &quot;done&quot; (yuck)
done:       for (;;) {
                // read the first byte - it has the sign bit
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                if ((b &amp; 0x40) != 0) {
                    is_negative = true;
                }
                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1282">1282</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L210">210</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                throw new IonException(&quot;overflow attempt to read long value into an int&quot;);
            case 8:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 7:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 6:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 5:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 4:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 3:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 2:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 1:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 0:
            }
            return retvalue;
        }
        public int readUIntAsInt(int len) throws IOException {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1282">1282</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L879">879</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                throw new IonException(&quot;overflow attempt to read long value into an int&quot;);
            case 8:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 7:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 6:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 5:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 4:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 3:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 2:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 1:
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 8) | b;
            case 0:
            }
            return retvalue;
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1178">1178</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1283">1283</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L880">880</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L211">211</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                case 8: // even after reading the 1st byte we may have 8 remaining
                        // bytes of value when the value is Long.MIN_VALUE since it
                        // has all 8 bytes for data and the ninth for the sign bit
                        // all by itself (which we read above)
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 7:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 6:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 5:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 4:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 3:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 2:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;
                case 1:
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    retvalue = (retvalue &lt;&lt; 8) | b;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1124">1124</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1153">1153</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                case 9: write((byte)((value &gt;&gt;&gt; (7*9)) &amp; mask));
                case 8: write((byte)((value &gt;&gt; (7*8)) &amp; mask));
                case 7: write((byte)((value &gt;&gt; (7*7)) &amp; mask));
                case 6: write((byte)((value &gt;&gt; (7*6)) &amp; mask));
                case 5: write((byte)((value &gt;&gt; (7*5)) &amp; mask));
                case 4: write((byte)((value &gt;&gt; (7*4)) &amp; mask));
                case 3: write((byte)((value &gt;&gt; (7*3)) &amp; mask));
                case 2: write((byte)((value &gt;&gt; (7*2)) &amp; mask));
                case 1: write((byte)((value &gt;&gt; (7*1)) &amp; mask));
                case 0: write((byte)((value &amp; mask) | 0x80L));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1351">1351</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L381">381</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        public int readVarUIntAsInt() throws IOException {
            int retvalue = 0;
            int  b;

            for (;;) { // fake loop to create a &quot;goto done&quot;
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1357">1357</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1018">1018</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L388">388</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/BlockedBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/BlockedBuffer.html#L1150">1150</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/BlockedBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/BlockedBuffer.html#L1182">1182</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        public final int writeTo(OutputStream out, int len) throws IOException
        {
            if (_buf == null) throw new IOException(&quot;stream is closed&quot;);
            fail_on_version_change();
            if (_pos &gt; _buf.size()) throw new IllegalArgumentException();

            int startingPos = _pos;
            int localEnd = _pos + len;
            if (localEnd &gt; _buf.size()) localEnd = _buf.size();
            assert(_curr.blockOffsetFromAbsolute(_pos) == _blockPosition);

            while (_pos &lt; localEnd) {
                int available = _curr._limit - _blockPosition;
                boolean partial_read = available &gt; localEnd - _pos;
                if (partial_read) {
                    available = localEnd - _pos;
                }

                out.write(_curr._buffer, _blockPosition, available);
                _pos += available;
                if (partial_read) {
                    _blockPosition += available;
                    break;
                }
                _curr = _buf.findBlockForRead(this, _version, _curr, _pos);
                _blockPosition =_curr.blockOffsetFromAbsolute(_pos);
            }

            fail_on_version_change();
            return _pos - startingPos;
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1356">1356</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1021">1021</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L391">391</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1360">1360</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L387">387</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryUserX.html#L292">292</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderTextUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderTextUserX.html#L221">221</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    }

    //  This code handles the skipped symbol table
    //  support - it is cloned in IonReaderTextUserX,
    //  IonReaderBinaryUserX and _Private_IonWriterBase
    //
    //  SO ANY FIXES HERE WILL BE NEEDED IN THOSE
    //  THREE LOCATIONS AS WELL.
    //
    private int _symbol_table_top = 0;
    private SymbolTable[] _symbol_table_stack = new SymbolTable[3]; // 3 is rare, IVM followed by a local sym tab with open content
    private void clear_system_value_stack()
    {
        while (_symbol_table_top &gt; 0) {
            _symbol_table_top--;
            _symbol_table_stack[_symbol_table_top] = null;
        }
    }
    private void push_symbol_table(SymbolTable symbols)
    {
        assert(symbols != null);
        if (_symbol_table_top &gt;= _symbol_table_stack.length) {
            int new_len = _symbol_table_stack.length * 2;
            SymbolTable[] temp = new SymbolTable[new_len];
            System.arraycopy(_symbol_table_stack, 0, temp, 0, _symbol_table_stack.length);
            _symbol_table_stack = temp;
        }
        _symbol_table_stack[_symbol_table_top++] = symbols;
    }
    @Override
    public SymbolTable pop_passed_symbol_table()
    {
        if (_symbol_table_top &lt;= 0) {
            return null;
        }
        _symbol_table_top--;
        SymbolTable symbols = _symbol_table_stack[_symbol_table_top];
        _symbol_table_stack[_symbol_table_top] = null;
        return symbols;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1708">1708</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L605">605</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            if ((b &amp; 0xe0) == 0xc0) {
                // for values from 0x80 to 0x7FF (all legal)
                c = (b &amp; ~0xe0);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
            }
            else if ((b &amp; 0xf0) == 0xe0) {
                // for values from 0x800 to 0xFFFFF (NOT all legal)
                c = (b &amp; ~0xf0);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
                if (c &gt; 0x00D7FF &amp;&amp; c &lt; 0x00E000) {
                    throw new IonException(&quot;illegal surrgate value encountered in input utf-8 stream&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1361">1361</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1018">1018</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L392">392</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1381">1381</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L288">288</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>        public long readVarIntAsLong() throws IOException
        {
            long    retvalue = 0;
            boolean is_negative = false;
            int     b;

            // synthetic label &quot;done&quot; (yuck)
done:       for (;;) {
                // read the first byte - it has the sign bit
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                if ((b &amp; 0x40) != 0) {
                    is_negative = true;
                }
                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                for (;;) {
                    if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                    if ((retvalue &amp; 0xFE00000000000000L) != 0) {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderBinaryUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryUserX.html#L261">261</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderTextUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderTextUserX.html#L184">184</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>    }

    private void validateSymbolToken(SymbolToken symbol) {
        if (symbol != null) {
            if (symbol.getText() == null &amp;&amp; symbol.getSid() &gt; getSymbolTable().getMaxId()) {
                throw new UnknownSymbolException(symbol.getSid());
            }
        }
    }

    @Override
    public SymbolToken[] getTypeAnnotationSymbols() {
        SymbolToken[] annotations = super.getTypeAnnotationSymbols();
        for (SymbolToken annotation : annotations) {
            validateSymbolToken(annotation);
        }
        return annotations;
    }

    @Override
    public final SymbolToken getFieldNameSymbol() {
        SymbolToken fieldName = super.getFieldNameSymbol();
        validateSymbolToken(fieldName);
        return fieldName;
    }

    @Override
    public final SymbolToken symbolValue() {
        SymbolToken symbol = super.symbolValue();
        validateSymbolToken(symbol);
        return symbol;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1435">1435</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1492">1492</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L261">261</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L347">347</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1441">1441</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1486">1486</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L255">255</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L341">341</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;

                // for the rest, they're all the same
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1021">1021</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1158">1158</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>            case 4: write((byte)((value &gt;&gt; (7*4)) &amp; mask));
            case 3: write((byte)((value &gt;&gt; (7*3)) &amp; mask));
            case 2: write((byte)((value &gt;&gt; (7*2)) &amp; mask));
            case 1: write((byte)((value &gt;&gt; (7*1)) &amp; mask));
            case 0: write((byte)((value &amp; mask) | 0x80L));
                    break;
            case -1: // or 0
                if (force_zero_write) {
                    write((byte)0x80);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1728">1728</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L625">625</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                    throw new IonException(&quot;illegal surrgate value encountered in input utf-8 stream&quot;);
                }
            }
            else if ((b &amp; 0xf8) == 0xf0) {
                // for values from 0x010000 to 0x1FFFFF (NOT all legal)
                c = (b &amp; ~0xf8);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
                b = read();
                if ((b &amp; 0xc0) != 0x80) throwUTF8Exception();
                c &lt;&lt;= 6;
                c |= (b &amp; ~0x80);
                if (c &gt; 0x10FFFF) {
                    throw new IonException(&quot;illegal surrgate value encountered in input utf-8 stream&quot;);</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/apps/EncodeApp.java</td>
<td><a href="./xref/com/amazon/ion/apps/EncodeApp.html#L81">81</a></td></tr>
<tr class="b">
<td>com/amazon/ion/apps/PrintApp.java</td>
<td><a href="./xref/com/amazon/ion/apps/PrintApp.html#L64">64</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                imports.add(symtab);
            }
            else if (&quot;--output-dir&quot;.equals(arg))
            {
                String path = args[++i];
                myOutputDir = new File(path);
                if (! myOutputDir.isDirectory() || ! myOutputDir.canWrite())
                {
                    throw new RuntimeException(&quot;Not a writeable directory: &quot;
                                               + path);
                }
            }
            else if (&quot;--output&quot;.equals(arg))
	    {
		String path = args[++i];
                myOutputFile = path;
                myOutputDir = new File(path).getParentFile();
                if (! myOutputDir.isDirectory() || ! myOutputDir.canWrite())
                {
                    throw new RuntimeException(&quot;Not a writeable directory: &quot;
                                               + path);
                }
            }
            else
            {</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1356">1356</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1025">1025</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L395">395</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1364">1364</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L387">387</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/lite/ReverseBinaryEncoder.java</td>
<td><a href="./xref/com/amazon/ion/impl/lite/ReverseBinaryEncoder.html#L503">503</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/lite/ReverseBinaryEncoder.java</td>
<td><a href="./xref/com/amazon/ion/impl/lite/ReverseBinaryEncoder.html#L592">592</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            myBuffer[offset]     = (byte) ( v &gt;&gt;&gt; (7 * 3));
            myBuffer[offset + 1] = (byte) ((v &gt;&gt;&gt; (7 * 2)) &amp; 0x7f);
            myBuffer[offset + 2] = (byte) ((v &gt;&gt;&gt; (7 * 1)) &amp; 0x7f);
            myBuffer[offset + 3] = (byte) ( v | 0x80);
        }
        else                                  // 5 bytes - 32 bits used - 0x7fffffff max (Integer.MAX_VALUE)
        {
            if ((offset -= 5) &lt; 0) {
                offset = growBuffer(offset);
            }
            myBuffer[offset]     = (byte) ( v &gt;&gt;&gt; (7 * 4));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1572">1572</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L470">470</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                    readAll(this, bits, 0, bitlen);

                    signum = 1;
                    if (bits[0] &lt; 0)
                    {
                        // value is negative, clear the sign
                        bits[0] &amp;= 0x7F;
                        signum = -1;
                    }
                    value = new BigInteger(signum, bits);
                }
                else {
                    signum = 0;
                    value = BigInteger.ZERO;
                }

                // Ion stores exponent, BigDecimal uses the negation &quot;scale&quot;
                int scale = -exponent;
                if (value.signum() == 0 &amp;&amp; signum == -1)
                {
                    assert value.equals(BigInteger.ZERO);
                    bd = Decimal.negativeZero(scale, mathContext);
                }
                else
                {
                    bd = Decimal.valueOf(value, scale, mathContext);
                }
            }

            return bd;
        }

        /**
         * @see IonReaderBinaryRawX#readTimestamp
         */
        public Timestamp readTimestampValue(int len) throws IOException</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderTreeUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderTreeUserX.html#L144">144</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/_Private_IonWriterBase.java</td>
<td><a href="./xref/com/amazon/ion/impl/_Private_IonWriterBase.html#L470">470</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    }
    //
    //  This code handles the skipped symbol table
    //  support - it is cloned in IonReaderTextUserX
    //  and IonReaderBinaryUserX
    //
    //  SO ANY FIXES HERE WILL BE NEEDED IN THOSE
    //  TWO LOCATIONS AS WELL.
    //
    private int _symbol_table_top = 0;
    private SymbolTable[] _symbol_table_stack = new SymbolTable[3]; // 3 is rare, IVM followed by a local sym tab with open content
    private void clear_system_value_stack()
    {
        while (_symbol_table_top &gt; 0) {
            _symbol_table_top--;
            _symbol_table_stack[_symbol_table_top] = null;
        }
    }
    private void push_symbol_table(SymbolTable symbols)
    {
        assert(symbols != null);
        if (_symbol_table_top &gt;= _symbol_table_stack.length) {
            int new_len = _symbol_table_stack.length * 2;
            SymbolTable[] temp = new SymbolTable[new_len];
            System.arraycopy(_symbol_table_stack, 0, temp, 0, _symbol_table_stack.length);
            _symbol_table_stack = temp;
        }
        _symbol_table_stack[_symbol_table_top++] = symbols;
    }
    public SymbolTable pop_passed_symbol_table()</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1021">1021</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L1129">1129</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            case 4: write((byte)((value &gt;&gt; (7*4)) &amp; mask));
            case 3: write((byte)((value &gt;&gt; (7*3)) &amp; mask));
            case 2: write((byte)((value &gt;&gt; (7*2)) &amp; mask));
            case 1: write((byte)((value &gt;&gt; (7*1)) &amp; mask));
            case 0: write((byte)((value &amp; mask) | 0x80L));</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryUserX.html#L292">292</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderTextUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderTextUserX.html#L221">221</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderTreeUserX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderTreeUserX.html#L144">144</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/_Private_IonWriterBase.java</td>
<td><a href="./xref/com/amazon/ion/impl/_Private_IonWriterBase.html#L470">470</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    }

    //  This code handles the skipped symbol table
    //  support - it is cloned in IonReaderTextUserX,
    //  IonReaderBinaryUserX and _Private_IonWriterBase
    //
    //  SO ANY FIXES HERE WILL BE NEEDED IN THOSE
    //  THREE LOCATIONS AS WELL.
    //
    private int _symbol_table_top = 0;
    private SymbolTable[] _symbol_table_stack = new SymbolTable[3]; // 3 is rare, IVM followed by a local sym tab with open content
    private void clear_system_value_stack()
    {
        while (_symbol_table_top &gt; 0) {
            _symbol_table_top--;
            _symbol_table_stack[_symbol_table_top] = null;
        }
    }
    private void push_symbol_table(SymbolTable symbols)
    {
        assert(symbols != null);
        if (_symbol_table_top &gt;= _symbol_table_stack.length) {
            int new_len = _symbol_table_stack.length * 2;
            SymbolTable[] temp = new SymbolTable[new_len];
            System.arraycopy(_symbol_table_stack, 0, temp, 0, _symbol_table_stack.length);
            _symbol_table_stack = temp;
        }
        _symbol_table_stack[_symbol_table_top++] = symbols;
    }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/bin/WriteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/bin/WriteBuffer.html#L714">714</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/bin/WriteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/bin/WriteBuffer.html#L748">748</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        data[limit++] = (byte) (value &gt;&gt; UINT_7_OCTET_SHIFT);
        data[limit++] = (byte) (value &gt;&gt; UINT_6_OCTET_SHIFT);
        data[limit++] = (byte) (value &gt;&gt; UINT_5_OCTET_SHIFT);
        data[limit++] = (byte) (value &gt;&gt; UINT_4_OCTET_SHIFT);
        data[limit++] = (byte) (value &gt;&gt; UINT_3_OCTET_SHIFT);
        data[limit++] = (byte) (value &gt;&gt; UINT_2_OCTET_SHIFT);
        data[limit++] = (byte) (value                      );
        block.limit = limit;
    }

    private void writeUInt64Slow(long value)</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonTokenConstsX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonTokenConstsX.html#L838">838</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonWriterSystemText.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonWriterSystemText.html#L551">551</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>        switch (type) {
        case NULL:      nullimage = &quot;null&quot;;           break;
        case BOOL:      nullimage = &quot;null.bool&quot;;      break;
        case INT:       nullimage = &quot;null.int&quot;;       break;
        case FLOAT:     nullimage = &quot;null.float&quot;;     break;
        case DECIMAL:   nullimage = &quot;null.decimal&quot;;   break;
        case TIMESTAMP: nullimage = &quot;null.timestamp&quot;; break;
        case SYMBOL:    nullimage = &quot;null.symbol&quot;;    break;
        case STRING:    nullimage = &quot;null.string&quot;;    break;
        case BLOB:      nullimage = &quot;null.blob&quot;;      break;
        case CLOB:      nullimage = &quot;null.clob&quot;;      break;
        case SEXP:      nullimage = &quot;null.sexp&quot;;      break;
        case LIST:      nullimage = &quot;null.list&quot;;      break;
        case STRUCT:    nullimage = &quot;null.struct&quot;;    break;

        default: throw new IllegalStateException(&quot;unexpected type &quot; + type);
        }</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1383">1383</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1424">1424</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1475">1475</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L244">244</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L290">290</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L330">330</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>            long    retvalue = 0;
            boolean is_negative = false;
            int     b;

            // synthetic label &quot;done&quot; (yuck)
done:       for (;;) {
                // read the first byte - it has the sign bit
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                if ((b &amp; 0x40) != 0) {
                    is_negative = true;
                }
                retvalue = (b &amp; 0x3F);
                if ((b &amp; 0x80) != 0) break done;

                // for the second byte we shift our eariler bits just as much,
                // but there are fewer of them there to shift
                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break done;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1365">1365</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1018">1018</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L396">396</a></td></tr>
<tr class="a"><td colspan='2'>
<div>
<pre>                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;

                if ((b = read()) &lt; 0) throwUnexpectedEOFException();
                retvalue = (retvalue &lt;&lt; 7) | (b &amp; 0x7F);
                if ((b &amp; 0x80) != 0) break;</pre></div></td></tr></table>
<table border="0" class="bodyTable">
<tr class="b">
<th>File</th>
<th>Line</th></tr>
<tr class="a">
<td>com/amazon/ion/impl/IonBinary.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonBinary.html#L1572">1572</a></td></tr>
<tr class="b">
<td>com/amazon/ion/impl/IonReaderBinaryRawX.java</td>
<td><a href="./xref/com/amazon/ion/impl/IonReaderBinaryRawX.html#L1097">1097</a></td></tr>
<tr class="a">
<td>com/amazon/ion/impl/SimpleByteBuffer.java</td>
<td><a href="./xref/com/amazon/ion/impl/SimpleByteBuffer.html#L470">470</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                    readAll(this, bits, 0, bitlen);

                    signum = 1;
                    if (bits[0] &lt; 0)
                    {
                        // value is negative, clear the sign
                        bits[0] &amp;= 0x7F;
                        signum = -1;
                    }
                    value = new BigInteger(signum, bits);
                }
                else {
                    signum = 0;
                    value = BigInteger.ZERO;
                }

                // Ion stores exponent, BigDecimal uses the negation &quot;scale&quot;
                int scale = -exponent;
                if (value.signum() == 0 &amp;&amp; signum == -1)
                {
                    assert value.equals(BigInteger.ZERO);
                    bd = Decimal.negativeZero(scale, mathContext);
                }
                else
                {
                    bd = Decimal.valueOf(value, scale, mathContext);
                }</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2022.All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
